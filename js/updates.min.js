/*!
 * Start Bootstrap - Freelancer v5.0.3 (https://startbootstrap.com/template-overviews/freelancer)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-freelancer/blob/master/LICENSE)
 */

$((function(){console.log("updates.js"),$("input#updates_name").on("change",(function(){$("#updatesButton").prop("disabled",!0),console.log("input#updates_name: ",$("input#updates_name").val());var e=$("input#updates_name").val().split(" ");console.log("updates_fullName: ",e),e.length>=2&&!e.some(e=>""===e)?($("input#updates_name ~ p.help-block.text-danger:last-child > ul").children().length>0&&$("input#updates_name ~ p.help-block.text-danger:last-child > ul").remove(),$("#updatesButton").prop("disabled",!1)):($("input#updates_name ~ p.help-block.text-danger:last-child").html('<ul role="alert"><li>'+$("input#updates_name").attr("data-validation-required-message")+"</li></ul>"),$("input#updates_name ~ p.help-block.text-danger:last-child > ul").append("<li>Names cannot have empty spaces.</li>"),$("#updatesButton").prop("disabled",!0))})),$("#select_all").click((function(){console.log("all clicked",this),this.checked?(console.log("checked"),$(".checkboxall").each((function(){$(".checkboxall").prop("checked",!0)}))):$(".checkboxall").each((function(){$(".checkboxall").prop("checked",!1)}))})),$(".checkboxall").on("change",(function(){$("#select_all").prop("checked",!1)})),$("#updatesForm input").jqBootstrapValidation({preventSubmit:!0,submitError:function(e,t,a){},submitSuccess:function(e,t){t.preventDefault();var a=new FormData(t.target),s=[];console.log("selectedInterestArray: ",s),$(".checkboxall").each((function(){console.log("checked items: ",$(".checkboxall:checked")),s.push($(".checkboxall:checked"))})),console.log("selectedInterestArray: ",s);var c=a.get("name");c.indexOf(" ")>=0&&(c=c.split(" ").slice(0,-1).join(" ")),$("#updatesButton").prop("disabled",!0),$.ajax({url:"././mail/updates.php",type:"POST",data:a,processData:!1,contentType:!1,cache:!1,success:function(){$("#success").html("<div class='alert alert-success'>"),$("#success > .alert-success").html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;").append("</button>"),$("#success > .alert-success").append($("<strong>").text("Thank you "+c+"! Your message has been sent!")),$("#success > .alert-success").append("</div>")},error:function(){$("#success").html("<div class='alert alert-danger'>"),$("#success > .alert-danger").html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;").append("</button>"),$("#success > .alert-danger").append($("<strong>").text("Sorry "+c+", it seems that my mail server is not responding. Please try again later!")),$("#success > .alert-danger").append("</div>")},complete:function(){setTimeout((function(){$("#updatesButton").prop("disabled",!1)}),1e3)}})},filter:function(){return $(this).is(":visible")}}),$('a[data-toggle="tab"]').click((function(e){e.preventDefault(),$(this).tab("show")}))})),$("#name").focus((function(){$("#success").html("")}));